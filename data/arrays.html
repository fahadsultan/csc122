

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>9. Arrays (under the hood) &#8212; Data Structures and Algorithms</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/myfile.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'data/arrays';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. Files and Modules" href="../functions/filesmodules.html" />
    <link rel="prev" title="8.3. Circular Linked Lists" href="linkedlists_circular.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    CSC-122 Data Structures & Algorithms (Spring 2024)
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../calendar.html">Calendar</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../syllabus/index.html">Syllabus</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../syllabus/pathways.html">Purposeful Pathways (Spring ‘24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../syllabus/grading.html">Grading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../syllabus/textbook.html">Textbooks &amp; Other Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../syllabus/mental_health.html">Mental Health Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../syllabus/academic_success.html">Center for Academic Success</a></li>
<li class="toctree-l2"><a class="reference internal" href="../syllabus/accomodations.html">Accomodations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../syllabus/integrity.html">Academic Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../syllabus/title_9.html">Nondiscrimination Policy and Sexual Misconduct</a></li>
</ul>
</li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Designing Abstract Processes (Algorithms)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../algos/analysis.html">1. Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../algos/time.html">1.4. Time Complexity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algos/space.html">1.5. Space Complexity</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../algos/brute.html">2. Brute Force</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../algos/search_linear.html">2.1. Linear Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algos/bogo.html">2.2. Bogosort</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../algos/decrease_conquer.html">3. Decrease and Conquer</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../algos/sort_selection.html">3.1. Selection Sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algos/sort_insertion.html">3.2. Insertion Sort</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../algos/divide_conquer.html">4. Divide and Conquer</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../algos/search_binary.html">4.1. Binary Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algos/sort_merge_iter.html">4.2. Merge Sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algos/sort_quick_iter.html">4.3. Quick Sort</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../functions/recursion.html">5. Recursion</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../functions/head_tail.html">5.4. Linear Recursion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/tree_recursion.html">5.5. Tree Recursion</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Building Abstractions with Data (Data Structures)</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="oop.html">6. Object-Oriented Programming</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="native_structures.html">6.1. Native Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="oop1.html">6.2. User-defined Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="inheritance.html">6.3. Extending Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="operator_overloading.html">6.4. Extending Operators</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="stacks_queues.html">7. Stacks and Queues</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../functions/stacks.html">7.1. Stacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="queue.html">7.2. Queues</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="linkedlists.html">8. Linked Lists</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="linkedlists_singly.html">8.1. Singly Linked Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="linkedlists_doubly.html">8.2. Doubly Linked Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="linkedlists_circular.html">8.3. Circular Linked Lists</a></li>
</ul>
</li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">9. Arrays (under the hood)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/filesmodules.html">10. Files and Modules</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fdata/arrays.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/data/arrays.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Arrays (under the hood)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#static-arrays">9.1. Static Arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#referential-arrays">9.2. Referential Arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compact-arrays">9.3. Compact Arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamic-arrays">9.4. Dynamic Arrays</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">9.4.1. Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">9.5. Summary</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="arrays-under-the-hood">
<h1><span class="section-number">9. </span>Arrays (under the hood)<a class="headerlink" href="#arrays-under-the-hood" title="Permalink to this headline">#</a></h1>
<p>An <strong>Array</strong> is simply <u>a contiguous block of memory</u>, where each cell in the block holds a <u>value directly or <em>reference</em></u> to an object.</p>
<p>This block of memory is often visualized as a numbered sequence of cells, where the number denotes the position of a cell within the sequence.</p>
<figure class="align-center" id="array3">
<a class="reference internal image-reference" href="https://i.ibb.co/FnWvV70/array3.png"><img alt="https://i.ibb.co/FnWvV70/array3.png" src="https://i.ibb.co/FnWvV70/array3.png" style="width: 40%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.1 </span><span class="caption-text">A higher-level abstraction for the string portrayed in figure before.</span><a class="headerlink" href="#array3" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Array serve as <u>low-level data structures <strong>used internally by Python</strong> to implement higher-level data structures</u> such as <code class="docutils literal notranslate"><span class="pre">lists</span></code>, <code class="docutils literal notranslate"><span class="pre">tuples</span></code>, and <code class="docutils literal notranslate"><span class="pre">strings</span></code>. To accurately describe the way in which Python represents the sequence types, we must first discuss aspects of the <em>low-level computer architecture</em>.</p>
<p>Each byte (8 bits) in the computer’s memory has a unique <strong>memory address</strong>, which is a number that identifies the byte’s location in memory. In this way, the computer system can refer to the data in “byte #2150” versus the data in “byte #2157,” for example.</p>
<p>Memory addresses are typically coordinated with the physical layout of the memory system, and so we often portray the numbers in sequential fashion. Figure below provides such a diagram, with the designated memory address for each byte.</p>
<figure class="align-center" id="array">
<a class="reference internal image-reference" href="https://i.ibb.co/DLyLmTw/array1.png"><img alt="https://i.ibb.co/DLyLmTw/array1.png" src="https://i.ibb.co/DLyLmTw/array1.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.2 </span><span class="caption-text">A representation of a portion of a computer’s memory, with individual bytes labeled with consecutive memory addresses.</span><a class="headerlink" href="#array" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<!-- <center><img src="" width="90%"></center> -->
<p>Despite the sequential nature of the numbering system, computer hardware is designed, in theory, so that any byte of the main memory can be efficiently accessed based upon its memory address. In this sense, we say that a computer’s main memory performs as <strong>Random Access Memory (RAM)</strong>.</p>
<p>That is, in theory, it is just as easy to retrieve byte #8675309 as it is to retrieve byte #309. Using the notation for asymptotic analysis, we say that any individual byte of memory can be stored or retrieved in <span class="math notranslate nohighlight">\(O(1)\)</span> time.</p>
<p>In general, <u>a programming language keeps track of the association between an variable name and the memory address in which the associated value is stored</u>. For example, identifier <code class="docutils literal notranslate"><span class="pre">x</span></code> might be associated with one value stored in memory, while <code class="docutils literal notranslate"><span class="pre">y</span></code> is associated with another value stored in memory.</p>
<p>A group of related values can be stored one after another in a contiguous portion of the computer’s memory i.e. an <strong>array</strong>. For example, a text string is stored as an ordered sequence of individual characters. On most computers, Python internally represents each character with 16 bits (i.e., 2 bytes). Therefore, a six-character string, such as  <code class="docutils literal notranslate"><span class="pre">SAMPLE</span></code> , would be stored in 12 consecutive bytes of memory, as diagrammed in Figure below.</p>
<figure class="align-center" id="array2">
<a class="reference internal image-reference" href="https://i.ibb.co/fQGDLsG/array2.png"><img alt="https://i.ibb.co/fQGDLsG/array2.png" src="https://i.ibb.co/fQGDLsG/array2.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.3 </span><span class="caption-text">A Python string embedded as an array of characters in the computer’s memory. We assume that each Unicode character of the string requires two bytes of memory. The numbers below the entries are indices into the string.</span><a class="headerlink" href="#array2" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>We describe this as <em>an array of six characters</em>, even though it requires 12 bytes of memory. We will refer to each location within an array as a <strong>cell</strong>, and will use an integer <strong>index</strong> to describe its location within the array, with cells numbered starting with 0, 1, 2, and so on. For example, in Figure above, the cell of the array with index 4 has contents L and is stored in bytes 2154 and 2155 of memory.</p>
<p>Each cell of an array must use the same number of bytes. This requirement is what allows an arbitrary cell of the array to be accessed in constant time based on its index. In particular, if one knows the memory address at which an array starts (e.g., <span class="math notranslate nohighlight">\(2146\)</span> in figure above), the number of bytes per element (e.g., 2 for a Unicode character), and a desired index within the array, the appropriate memory address can be computed using the calculation,</p>
<div class="math notranslate nohighlight">
\[ \text{start} + (\text{cellsize} \times \text{index}) \]</div>
<p>By this formula, the cell at index 0 begins precisely at the start of the array, the cell at index 1 begins precisely <span class="math notranslate nohighlight">\(\text{cellsize}\)</span> bytes beyond the start of the array, and so on. As an example, cell 4 of Figure above begins at memory location <span class="math notranslate nohighlight">\(2146 + (2 \times 4)\)</span> = 2146 + 8 = 2154.</p>
<section id="static-arrays">
<h2><span class="section-number">9.1. </span>Static Arrays<a class="headerlink" href="#static-arrays" title="Permalink to this headline">#</a></h2>
<p>A <strong>static array</strong> is a type of array whose size is fixed at the time of its creation. Immutable sequences in Python, such as <code class="docutils literal notranslate"><span class="pre">tuple</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code> instances, are examples of static arrays.</p>
<p></u>When creating a <em>low-level array</em> in a computer system, the precise size of that array must be explicitly declared</u> in order for the system to properly allocate a consecutive piece of memory for its storage. For example, the figure below displays an array of 12 bytes that might be stored in memory locations 2146 through 2157.</p>
<figure class="align-center" id="figure-5-11">
<a class="reference internal image-reference" href="https://i.ibb.co/ggpDSqz/array12.png"><img alt="https://i.ibb.co/ggpDSqz/array12.png" src="https://i.ibb.co/ggpDSqz/array12.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.4 </span><span class="caption-text">An array of 12 bytes allocated in memory locations 2146 through 2157</span><a class="headerlink" href="#figure-5-11" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Because the system might dedicate neighboring memory locations to store other data, the capacity of an array cannot trivially be increased by expanding into subsequent cells.</p>
<p>In the context of representing a Python <code class="docutils literal notranslate"><span class="pre">tuple</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code> instance, this constraint is no problem. Instances of those classes are immutable, so the correct size for an underlying array can be fixed when the object is instantiated.</p>
<!-- 
As another motivating example, assume that we want a medical information system to keep track of the patients currently assigned to beds in a certain hospital. If we assume that the hospital has 200 beds, and conveniently that those beds are num- bered from 0 to 199, we might consider using an array-based structure to maintain the names of the patients currently assigned to those beds. For example, in Python we might use a list of names, such as:

```python
data = ['Rene' , 'Joseph' , 'Janet' , 'Jonas' , 'Helen' , 'Virginia']
```

To represent such a list with an array, Python must adhere to the requirement that each cell of the array use the same number of bytes. Yet the elements are strings, and strings naturally have different lengths. Python could attempt to reserve enough space for each cell to hold the _maximum_ length string (not just of currently stored strings, but of any string we might ever want to store), but that would be wasteful. -->
<hr/><p><br/><br/></p>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<p class="sd-card-text"><strong>Memory Usage of Python Objects</strong></p>
<hr/>
<p class="sd-card-text"><strong><code class="docutils literal notranslate"><span class="pre">sys.getsizeof(..)</span></code></strong> function returns the size of an object in bytes.</p>
<p class="sd-card-text">Note that empty lists, strings etc. have some initial memory overhead associated with them. After that, the memory usage increases as you add elements to the object.</p>
<p class="sd-card-text">Generally, the size of an empty list is 56 bytes, while the size of an empty tuple is 40 bytes. When you add one element to the list, its size increases to 64 bytes, and so on.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">([]))</span>  <span class="c1"># 56 (empty list has 56 bytes overhead, 8 bytes for every element after that)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(()))</span>  <span class="c1"># 40 (empty tuple has 40 bytes overhead, 8 bytes for every element after that)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">))</span>  <span class="c1"># 49 (empty string has 49 bytes overhead, 1 byte for every character after that)</span>

</pre></div>
</div>
</div>
</div>
<p>Python allows you to query the actual number of bytes being used for the primary storage of any object. This is done using the <code class="docutils literal notranslate"><span class="pre">getsizeof</span></code> function of the <code class="docutils literal notranslate"><span class="pre">sys</span></code> module.</p>
<p>Note that in the code cell below, the memory usage of the string type variable <code class="docutils literal notranslate"><span class="pre">txt</span></code> increases linearly with the number of characters in the string.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span> 

<span class="n">txt</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of characters: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">txt</span><span class="p">),</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> Memory (in bytes):&quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">txt</span><span class="p">))</span>
    <span class="n">txt</span> <span class="o">+=</span> <span class="s2">&quot;0&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Number of characters:  0 	 Memory (in bytes): 49
Number of characters:  1 	 Memory (in bytes): 50
Number of characters:  2 	 Memory (in bytes): 51
Number of characters:  3 	 Memory (in bytes): 52
Number of characters:  4 	 Memory (in bytes): 53
Number of characters:  5 	 Memory (in bytes): 54
Number of characters:  6 	 Memory (in bytes): 55
Number of characters:  7 	 Memory (in bytes): 56
Number of characters:  8 	 Memory (in bytes): 57
Number of characters:  9 	 Memory (in bytes): 58
</pre></div>
</div>
</div>
</div>
</section>
<section id="referential-arrays">
<h2><span class="section-number">9.2. </span>Referential Arrays<a class="headerlink" href="#referential-arrays" title="Permalink to this headline">#</a></h2>
<p>Instead, Python represents a list or tuple instance using an internal storage mechanism of an array of object <strong>references</strong>. At the lowest level, what is stored is a consecutive sequence of memory addresses at which the elements of the sequence reside. A high-level diagram of such a list is shown in figure below.</p>
<figure class="align-center" id="array4">
<a class="reference internal image-reference" href="https://i.ibb.co/CJmjccS/array4.png"><img alt="https://i.ibb.co/CJmjccS/array4.png" src="https://i.ibb.co/CJmjccS/array4.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.5 </span><span class="caption-text">An array storing references to strings.</span><a class="headerlink" href="#array4" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Although the relative size of the individual elements may vary, the number of bits used to store the memory address of each element is fixed (e.g., 64-bits per address). In this way, Python can support constant-time access to a list or tuple element based on its index.</p>
<p>As a result, two lists of the same length will consume the same amount of memory, regardless of the sizes of the elements that they store.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span> 

<span class="n">data</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Rene&#39;</span> <span class="p">,</span> <span class="s1">&#39;Joseph&#39;</span> <span class="p">,</span> <span class="s1">&#39;Janet&#39;</span> <span class="p">,</span> <span class="s1">&#39;Jonas&#39;</span> <span class="p">,</span> <span class="s1">&#39;Helen&#39;</span> <span class="p">,</span> <span class="s1">&#39;Virginia&#39;</span><span class="p">]</span>

<span class="n">data2</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;j&#39;</span><span class="p">,</span> <span class="s1">&#39;j&#39;</span><span class="p">,</span> <span class="s1">&#39;j&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">]</span>

<span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>Note that in the code cell above, the size of the two variables and <code class="docutils literal notranslate"><span class="pre">data</span></code> and <code class="docutils literal notranslate"><span class="pre">data2</span></code> is the same because they both contain an equal number of memory addresses, even though the individual strings they reference have different lengths.</p>
<p>Referential arays are generally not as memory efficient as static arrays.</p>
<p>Note that <u>memory addresses are typically 64 bits (8 bytes)</u> in size on modern computers. This means that the memory overhead for a list of <span class="math notranslate nohighlight">\(n\)</span> elements is <span class="math notranslate nohighlight">\(8n\)</span> bytes.</p>
<p>As another case study, suppose we wish to store a sequence of one million, 64-bit integers. In theory, we might hope to use only 64 million bits. However, we estimate that a Python list will use four to five times as much memory. Each element of the list will result in a 64-bit memory address being stored in the primary array, and an <code class="docutils literal notranslate"><span class="pre">int</span></code> instance being stored elsewhere in memory.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="c1"># 120 = 56 (overhead) + 32 (4 addresses, each address is 4 bytes) + 32 (4 integers, each integer is 8 bytes)</span>

<span class="n">data2</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">data</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">data2</span><span class="p">))</span> <span class="c1"># 88 = 56 (overhead) + 32 (4 addresses, each address is 8 bytes). The integers themselves are not primary storage in data2.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>120
88
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>50
</pre></div>
</div>
</div>
</div>
<p>In Figure above, we characterize a list of strings that are the names of the patients in a hospital. It is more likely that a medical information system would manage more comprehensive information on each patient, perhaps represented as an in- stance of a Patient class. From the perspective of the list implementation, the same principle applies: The list will simply keep a sequence of references to those ob- jects. Note as well that a reference to the <code class="docutils literal notranslate"><span class="pre">None</span></code> object can be used as an element of the list to represent an empty bed in the hospital.</p>
<p>The fact that lists and tuples are referential structures is significant to the se- mantics of these classes. A single list instance may include multiple references to the same object as elements of the list, and it is possible for a single object to be an element of two or more lists, as those lists simply store references back to that object. As an example, when you compute a slice of a list, the result is a new list instance, but that new list has references to the same elements that are in the original list, as portrayed in Figure below.</p>
<figure class="align-center" id="array5">
<a class="reference internal image-reference" href="https://i.ibb.co/X2Fp4Yx/array5.png"><img alt="https://i.ibb.co/X2Fp4Yx/array5.png" src="https://i.ibb.co/X2Fp4Yx/array5.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.6 </span><span class="caption-text">The result of the command <code class="docutils literal notranslate"><span class="pre">temp</span> <span class="pre">=</span> <span class="pre">primes[3:6]</span></code></span><a class="headerlink" href="#array5" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>When the elements of the list are immutable objects, as with the integer in- stances in Figure 5.5, the fact that the two lists share elements is not that significant, as neither of the lists can cause a change to the shared object. If, for example, the command <code class="docutils literal notranslate"><span class="pre">temp[2]</span> <span class="pre">=</span> <span class="pre">15</span></code> were executed from this configuration, that does not change the existing integer object; it changes the reference in cell 2 of the temp list to reference a different object. The resulting configuration is shown in Figure below.</p>
<figure class="align-center" id="array6">
<a class="reference internal image-reference" href="https://i.ibb.co/yQftP2V/array6.png"><img alt="https://i.ibb.co/yQftP2V/array6.png" src="https://i.ibb.co/yQftP2V/array6.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.7 </span><span class="caption-text">The result of the command <code class="docutils literal notranslate"><span class="pre">temp[2]</span> <span class="pre">=</span> <span class="pre">15</span></code> upon the configuration portrayed in previous figure.</span><a class="headerlink" href="#array6" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The same semantics is demonstrated when making a new list as a copy of an existing one, with a syntax such as backup = list(primes). This produces a new list that is a <strong>shallow copy</strong>, in that it references the same elements as in the first list. With immutable elements, this point is moot. If the contents of the list were of a mutable type, a <strong>deep copy</strong>, meaning a new list with new elements, can be produced by using the deepcopy function from the copy module.</p>
<p>As a more striking example, it is a common practice in Python to initialize an array of integers using a syntax such as counters = [0]   8. This syntax produces a list of length eight, with all eight elements being the value zero. Technically, all eight cells of the list reference the same object, as shown below.</p>
<figure class="align-center" id="array7">
<a class="reference internal image-reference" href="https://i.ibb.co/f4mVB8Y/array7.png"><img alt="https://i.ibb.co/f4mVB8Y/array7.png" src="https://i.ibb.co/f4mVB8Y/array7.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.8 </span><span class="caption-text">The result of the command <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span> <span class="pre">[0]*8</span></code>.</span><a class="headerlink" href="#array7" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>At first glance, the extreme level of aliasing in this configuration may seem alarming. However, we rely on the fact that the referenced integer is immutable. Even a command such as <code class="docutils literal notranslate"><span class="pre">counters[2]</span> <span class="pre">+=</span> <span class="pre">1</span></code> does not technically change the value of the existing integer instance. This computes a new integer, with value 0 + 1, and sets cell 2 to reference the newly computed value. The resulting configuration is shown in Figure 5.8</p>
<figure class="align-center" id="array8">
<a class="reference internal image-reference" href="https://i.ibb.co/QpmfZ9L/array8.png"><img alt="https://i.ibb.co/QpmfZ9L/array8.png" src="https://i.ibb.co/QpmfZ9L/array8.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.9 </span><span class="caption-text">The result of the command <code class="docutils literal notranslate"><span class="pre">counters[2]</span> <span class="pre">+=</span> <span class="pre">1</span></code> upon the configuration portrayed in previous figure.</span><a class="headerlink" href="#array8" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>As a final manifestation of the referential nature of lists, we note that the extend command is used to add all elements from one list to the end of another list. The extended list does not receive copies of those elements, it receives references to those elements. Figure 5.9 portrays the effect of a call to extend.</p>
<figure class="align-center" id="array9">
<a class="reference internal image-reference" href="https://i.ibb.co/1ZZFWTp/array9.png"><img alt="https://i.ibb.co/1ZZFWTp/array9.png" src="https://i.ibb.co/1ZZFWTp/array9.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.10 </span><span class="caption-text">The effect of command <code class="docutils literal notranslate"><span class="pre">primes.extend(extras)</span></code>, shown in light gray.</span><a class="headerlink" href="#array9" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="compact-arrays">
<h2><span class="section-number">9.3. </span>Compact Arrays<a class="headerlink" href="#compact-arrays" title="Permalink to this headline">#</a></h2>
<p>A <strong>compact array</strong> is one in which the cells of the array directly contain the data values only.</p>
<p>In other words, the array is storing the bits that represent the primary data (characters, in the case of strings) directly, rather than storing references to the data.</p>
<p>Strings in Python are represented using an array of characters and NOT an array of references.</p>
<figure class="align-center" id="array10">
<a class="reference internal image-reference" href="https://i.ibb.co/SdfVPnj/array10.png"><img alt="https://i.ibb.co/SdfVPnj/array10.png" src="https://i.ibb.co/SdfVPnj/array10.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.11 </span><span class="caption-text">A compact array representation of a string.</span><a class="headerlink" href="#array10" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Compact arrays have several advantages over referential structures in terms of computing performance.</p>
<p>Most significantly, the <u>overall memory usage will be much lower for a compact structure</u> because there is no overhead devoted to the explicit storage of the sequence of memory references.</p>
<p>That is, a referential structure will typically use 64-bits for the memory address stored in the array, on top of whatever number of bits are used to represent the object that is considered the element.</p>
<p>Also, each Unicode character stored in a compact array within a string typically requires 2 bytes (8 bits). If each character were stored independently as a one-character string, there would be significantly more bytes used.</p>
<p>Another important advantage to a compact structure for high-performance computing is that the primary data are stored consecutively in memory. Note well that this is not the case for a referential structure. That is, even though a list maintains careful ordering of the sequence of memory addresses, where those elements reside in memory is not determined by the list. Because of the workings of the cache and memory hierarchies of computers, it is often advantageous to have data stored in memory near other data that might be used in the same computations.</p>
<p>Primary support for compact arrays is in a module named <code class="docutils literal notranslate"><span class="pre">array</span></code>. That module defines a class, also named <code class="docutils literal notranslate"><span class="pre">array</span></code>, providing compact storage for arrays of primitive data types. A portrayal of such an array of integers is shown in Figure 5.10.</p>
<figure class="align-center" id="array11">
<a class="reference internal image-reference" href="https://i.ibb.co/w6j8Qk5/array11.png"><img alt="https://i.ibb.co/w6j8Qk5/array11.png" src="https://i.ibb.co/w6j8Qk5/array11.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.12 </span><span class="caption-text">Integers stored compactly as elements of a Python array.</span><a class="headerlink" href="#array11" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The public interface for the array class conforms mostly to that of a Python list. However, the constructor for the array class requires a type code as a first parameter, which is a character that designates the type of data that will be stored in the array. As a tangible example, the type code, <code class="docutils literal notranslate"><span class="pre">'i'</span></code> , designates an array of (signed) integers, typically represented using at least 16-bits each.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">array</span> <span class="kn">import</span> <span class="n">array</span>

<span class="n">primes</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s1">&#39;i&#39;</span> <span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>The type code allows the interpreter to determine precisely how many bits are needed per element of the array. The type codes supported by the array module, as shown in Table 5.1, are formally based upon the native data types used by the C programming language (the language in which the the most widely used distri- bution of Python is implemented). The precise number of bits for the C data types is system-dependent, but typical ranges are shown in the table.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Type Code</p></th>
<th class="head"><p>C Type</p></th>
<th class="head"><p>Minimum Size in Bytes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘b’</p></td>
<td><p>signed char</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>‘B’</p></td>
<td><p>unsigned char</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>‘u’</p></td>
<td><p>Py_UNICODE</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>‘h’</p></td>
<td><p>signed short</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>‘H’</p></td>
<td><p>unsigned short</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>‘i’</p></td>
<td><p>signed int</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>‘I’</p></td>
<td><p>unsigned int</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>‘l’</p></td>
<td><p>signed long</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>‘L’</p></td>
<td><p>unsigned long</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>‘f’</p></td>
<td><p>float</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>‘d’</p></td>
<td><p>double</p></td>
<td><p>8</p></td>
</tr>
</tbody>
</table>
<p>The array module does not provide support for making compact arrays of user- defined data types. Compact arrays of such structures can be created with the lower- level support of a module named ctypes.</p>
</section>
<section id="dynamic-arrays">
<h2><span class="section-number">9.4. </span>Dynamic Arrays<a class="headerlink" href="#dynamic-arrays" title="Permalink to this headline">#</a></h2>
<p>Python’s list class presents a more interesting abstraction. Although a list has a particular length when constructed, the class allows us to add elements to the list, with no apparent limit on the overall capacity of the list. To provide this abstraction, Python relies on an algorithmic sleight of hand known as a <strong>Dynamic Array</strong>.</p>
<p>The first key to providing the semantics of a dynamic array is that a list instance maintains <u>an underlying array that often has greater capacity than the current length of the list</u>. For example, while a user may have created a list with five elements, the system may have reserved an underlying array capable of storing eight object references (rather than only five). This <u>extra capacity makes it easy to append a new element to the list</u> by using the next available cell of the array.</p>
<p><u>If a user continues to append elements to a list, any <strong>reserved capacity will eventually be exhausted</strong>. In that case, <strong>the class requests a new, larger array from the system</strong>, and initializes the new array so that its prefix matches that of the existing smaller array.</u> At that point in time, the old array is no longer needed, so it is reclaimed by the system. Intuitively, this strategy is much like that of the hermit crab, which moves into a larger shell when it outgrows its previous one.</p>
<p>We give empirical evidence that Python’s list class is based upon such a strategy. We rely on a function named <code class="docutils literal notranslate"><span class="pre">getsizeof</span></code> that is available from the <code class="docutils literal notranslate"><span class="pre">sys</span></code> module. This function reports the number of bytes that are being used to store an object in Python. For a list, it reports the number of bytes devoted to the array and other instance variables of the list, but not any space devoted to elements referenced by the list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>  <span class="c1"># provides getsizeof function</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">27</span>
<span class="n">data</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>          <span class="c1"># note: must fix choice of n </span>
    <span class="n">a</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>           <span class="c1"># number of elements</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="c1"># actual size in bytes </span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Length: </span><span class="si">{0:3d}</span><span class="s1">; Size in bytes: </span><span class="si">{1:4d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>       <span class="c1"># increase length by one</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Length:   0; Size in bytes:   56
Length:   1; Size in bytes:   88
Length:   2; Size in bytes:   88
Length:   3; Size in bytes:   88
Length:   4; Size in bytes:   88
Length:   5; Size in bytes:  120
Length:   6; Size in bytes:  120
Length:   7; Size in bytes:  120
Length:   8; Size in bytes:  120
Length:   9; Size in bytes:  184
Length:  10; Size in bytes:  184
Length:  11; Size in bytes:  184
Length:  12; Size in bytes:  184
Length:  13; Size in bytes:  184
Length:  14; Size in bytes:  184
Length:  15; Size in bytes:  184
Length:  16; Size in bytes:  184
Length:  17; Size in bytes:  248
Length:  18; Size in bytes:  248
Length:  19; Size in bytes:  248
Length:  20; Size in bytes:  248
Length:  21; Size in bytes:  248
Length:  22; Size in bytes:  248
Length:  23; Size in bytes:  248
Length:  24; Size in bytes:  248
Length:  25; Size in bytes:  312
Length:  26; Size in bytes:  312
</pre></div>
</div>
</div>
</div>
<p>In evaluating the results of the experiment, we draw attention to the first line of output from Code Fragment 5.2. We see that an empty list instance already requires a certain number of bytes of memory (72 on our system). In fact, each object in Python maintains some state, for example, a reference to denote the class to which it belongs. Although we cannot directly access private instance variables for a list, we can speculate that in some form it maintains state information akin to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_n</span></code>: The number of actual elements currently stored in the list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_capacity</span></code>: The maximum number of elements that could be stored in the currently allocated array.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_A</span></code>: The reference to the currently allocated array (initially <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
</ul>
<p>As soon as the first element is inserted into the list, we detect a change in the underlying size of the structure. In particular, we see the number of bytes jump from 72 to 104, an increase of exactly 32 bytes. Our experiment was run on a 64-bit machine architecture, meaning that each memory address is a 64-bit number (i.e., 8 bytes). We speculate that the increase of 32 bytes reflects the allocation of an underlying array capable of storing four object references. This hypothesis is consistent with the fact that we do not see any underlying change in the memory usage after inserting the second, third, or fourth element into the list.</p>
<p>After the fifth element has been added to the list, we see the memory usage jump from 104 bytes to 136 bytes. If we assume the original base usage of 72 bytes for the list, the total of 136 suggests an additional 64 = 8 × 8 bytes that provide capacity for up to eight object references. Again, this is consistent with the experiment, as the memory usage does not increase again until the ninth insertion. At that point, the 200 bytes can be viewed as the original 72 plus an additional 128-byte array to store 16 object references. The 17th insertion pushes the overall memory usage to 272 = 72 + 200 = 72 + 25 × 8, hence enough to store up to 25 element references</p>
<p>Because a list is a referential structure, the result of getsizeof for a list instance only includes the size for representing its primary structure; it does not account for memory used by the objects that are elements of the list. In our experiment, we repeatedly append None to the list, because we do not care about the contents, but we could append any type of object without affecting the number of bytes reported by getsizeof(data).</p>
<p><u>The strategy of replacing an array with a new, however it can be proven that <strong>the amortized cost (average-case time complexity) of each append operation is O(1) and worst-case time complexity is O(n)</strong>.</u></p>
<!-- If we were to continue such an experiment for further iterations, we might try to discern the pattern for how large of an array Python creates each time the ca- pacity of the previous array is exhausted (see Exercises R-5.2 and C-5.13). Before exploring the precise sequence of capacities used by Python, we continue in this section by describing a general approach for implementing dynamic arrays and for performing an asymptotic analysis of their performance. --><!-- ### Amortized Analysis of Dynamic Arrays -->
<!-- In this section, we perform a detailed analysis of the running time of operations on dynamic arrays. We use the big-Omega notation introduced in Section 3.3.1 to give an asymptotic lower bound on the running time of an algorithm or step within it. -->
<!-- 
```{figure} https://i.ibb.co/KL5QG1q/array14.png
---
width: 50%
name: Figure 5.13
align: center
---
Running times of a series of append operations on a dynamic array.
``` -->
<!-- Let S be a sequence implemented by means of a dynamic array with initial capacity one, using the strategy of doubling the array size when full. The total time to perform a series of n append operations in S, starting from S being empty, is O(n).

The proof of this result is based on the following observations:

1. The first append operation takes O(1) time.
2. The next two append operations take O(1) time each.
3. The next four append operations take O(1) time each.
4. The next eight append operations take O(1) time each.
5. The next sixteen append operations take O(1) time each.
6. The next thirty-two append operations take O(1) time each.

In general, the next $2^i$ append operations take O(1) time each, for $i = 0, 1, 2, ...$. The total time to perform the first $2^i$ append operations is O($2^i$). The total time to perform the first n append operations is the sum of the times to perform the first $2^i$ append operations for all $i = 0, 1, 2, ..., k$, where $2^k ≤ n < 2^{k+1}$. This sum is at most $2^0 + 2^1 + 2^2 + ... + 2^k = 2^{k+1} − 1 = 2n − 1 = O(n)$. -->
<!-- #### Geometric Increase in Capacity -->
<!-- Although the proof of Proposition 5.1 relies on the array being doubled each time we expand, the O(1) amortized bound per operation can be proven for any geo- metrically increasing progression of array sizes (see Section 2.4.2 for discussion of geometric progressions). When choosing the geometric base, there exists a trade- off between run-time efficiency and memory usage. With a base of 2 (i.e., doubling the array), if the last insertion causes a resize event, the array essentially ends up twice as large as it needs to be. If we instead increase the array by only 25% of its current size (i.e., a geometric base of 1.25), we do not risk wasting as much memory in the end, but there will be more intermediate resize events along the way. Still it is possible to prove an O(1) amortized bound, using a constant factor greater than the 3 cyber-dollars per operation used in the proof of Proposition 5.1 (see Exercise C-5.15). The key to the performance is that the amount of additional space is proportional to the current size of the array. -->
<!-- #### Beware of Arithmetic Progression -->
<!-- 
To avoid reserving too much space at once, it might be tempting to implement a dynamic array with a strategy in which a constant number of additional cells are reserved each time an array is resized. Unfortunately, the overall performance of such a strategy is significantly worse. At an extreme, an increase of only one cell causes each append operation to resize the array, leading to a familiar 1 + 2 + 3 + ···+n summation and Ω(n2) overall cost. Using increases of 2 or 3 at a time is slightly better, as portrayed in Figure 5.13, but the overall cost remains quadratic. -->
<figure class="align-center" id="figure-5-13">
<a class="reference internal image-reference" href="https://i.ibb.co/Rgq1THy/array15.png"><img alt="https://i.ibb.co/Rgq1THy/array15.png" src="https://i.ibb.co/Rgq1THy/array15.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.13 </span><span class="caption-text">Running times of a series of append operations on a dynamic array
using arithmetic progression of sizes. (a) Assumes increase of 2 in size of the array, while (b) assumes increase of 3.</span><a class="headerlink" href="#figure-5-13" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Using a fixed increment for each resize, and thus an arithmetic progression of intermediate array sizes, results in an overall time that is quadratic in the number of operations, as shown in the following proposition. Intuitively, even an increase in 1000 cells per resize will become insignificant for large data sets.</p>
<!-- #### Proposition 2: Fixed increment $\rightarrow Ω(n^2)$

Performing a series of n append operations on an initially empty dynamic array using a fixed increment with each resize takes $Ω(n^2)$ time.

The proof of this result is based on the following observations:

Let $c > 0$ represent the fixed increment in capacity that is used for each resize event. During the series of $n$ append operations, time will have been spent initializing arrays of size $c,2c,3c,...,mc$ for $m = \lceil{n}/c\rceil$, and therefore, the overall time would be proportional to $c + 2c + 3c + · · · + mc$.

$$ \sum_{i=1}^{m} ci = c \sum_{i=1}^{m} i = c \frac{m(m+1)}{2} \geq c \frac{\frac{n}{c}(\frac{n}{c} + 1)}{2}  \geq \frac{n^2}{2c} $$

Therefore, performing the n append operations takes $Ω(n^2)$ time. --><p>Python’s list class is using a form of dynamic arrays for its storage but does neither uses a pure geometric progression nor an arithmetic progression.</p>
<p>Despite this, Python’s implementation of the append method exhibits amortized constant-time behavior. We can demonstrate this fact experimentally.</p>
<p>A single <code class="docutils literal notranslate"><span class="pre">.append</span></code> operation typically executes so quickly that it would be difficult for us to accurately measure the time elapsed at that granularity, although we should notice some of the more expensive operations in which a resize is performed. We can get a more accurate measure of the amortized cost per operation by performing a series of <code class="docutils literal notranslate"><span class="pre">n</span></code> append operations on an initially empty list and determining the average cost of each.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span> 

<span class="k">def</span> <span class="nf">compute_average</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Perform n appends to an empty list and return average time elapsed.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span> <span class="p">]</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span> <span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">/</span> <span class="n">n</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="n">i</span>
    <span class="n">avg</span> <span class="o">=</span> <span class="n">compute_average</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Avg time: &quot;</span><span class="p">,</span> <span class="n">avg</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Inserts: &quot;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Avg time:  1.1920928955078125e-07 	Inserts:  10
Avg time:  6.914138793945312e-08 	Inserts:  100
Avg time:  5.6028366088867184e-08 	Inserts:  1000
Avg time:  5.98907470703125e-08 	Inserts:  10000
Avg time:  5.715131759643555e-08 	Inserts:  100000
Avg time:  5.125999450683594e-08 	Inserts:  1000000
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Avg time:  5.077378749847412e-08 	Inserts:  10000000
</pre></div>
</div>
</div>
</div>
<section id="implementation">
<h3><span class="section-number">9.4.1. </span>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">#</a></h3>
<p>Although the Python <code class="docutils literal notranslate"><span class="pre">list</span></code> class provides a highly optimized implementation of dynamic arrays, it is instructive to see how such a class might be implemented.</p>
<p>The key is to provide means to grow the array <code class="docutils literal notranslate"><span class="pre">A</span></code> that stores the elements of a list. Of course, we cannot actually grow that array, as its capacity is fixed. If an element is appended to a list at a time when the underlying array is full, we perform the following steps:</p>
<ol class="arabic simple">
<li><p>Allocate a new array <code class="docutils literal notranslate"><span class="pre">B</span></code> with larger capacity.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">B[i]</span> <span class="pre">=</span> <span class="pre">A[i]</span></code>, for <span class="math notranslate nohighlight">\(i = 0,...,n−1\)</span>, where n denotes current number of items.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">=</span> <span class="pre">B</span></code>, that is, we henceforth use <code class="docutils literal notranslate"><span class="pre">B</span></code> as the array supporting the list.</p></li>
<li><p>Insert the new element in the new array.</p></li>
</ol>
<figure class="align-center" id="figure-5-12">
<a class="reference internal image-reference" href="https://i.ibb.co/gdktfcN/array13.png"><img alt="https://i.ibb.co/gdktfcN/array13.png" src="https://i.ibb.co/gdktfcN/array13.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.14 </span><span class="caption-text">An illustration of the three steps for “growing” a dynamic array: (a) create new array <code class="docutils literal notranslate"><span class="pre">B</span></code>; (b) store elements of <code class="docutils literal notranslate"><span class="pre">A</span></code> in <code class="docutils literal notranslate"><span class="pre">B</span></code>; (c) reassign reference A to the new array. Not shown is the future garbage collection of the old array, or the insertion of the new element.</span><a class="headerlink" href="#figure-5-12" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The remaining issue to consider is how large of a new array to create. A com- monly used rule is for the new array to have twice the capacity of the existing array that has been filled.</p>
<p>The code cell below offers a concrete implementation of dynamic arrays in Python. Our <code class="docutils literal notranslate"><span class="pre">DynamicArray</span></code> class is designed using ideas described in this section. While consistent with the interface of a Python <code class="docutils literal notranslate"><span class="pre">list</span></code> class, we provide only limited functionality in the form of an <code class="docutils literal notranslate"><span class="pre">append</span></code> method, and accessors <code class="docutils literal notranslate"><span class="pre">__len__</span></code> and <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>. Support for creating low-level arrays is provided by a module named <code class="docutils literal notranslate"><span class="pre">ctypes</span></code>. Because we will not typically use such a low-level structure in the remain- der of this book, we omit a detailed explanation of the <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> module. Instead, we wrap the necessary command for declaring the raw array within a private utility method <code class="docutils literal notranslate"><span class="pre">_make_array</span></code>. The hallmark expansion procedure is performed in our nonpublic <code class="docutils literal notranslate"><span class="pre">_resize</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ctypes</span> 

<span class="k">class</span> <span class="nc">DynamicArray</span><span class="p">:</span> 
    <span class="sd">&#39;&#39;&#39;A dynamic array class akin to a simplified Python list.&#39;&#39;&#39;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Create an empty array.&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">=</span> <span class="mi">0</span>                                    <span class="c1"># count actual elements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_capacity</span> <span class="o">=</span> <span class="mi">1</span>                             <span class="c1"># default array capacity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_capacity</span><span class="p">)</span>     <span class="c1"># low-level array</span>
        
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return number of elements stored in the array.&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span>
    
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return element at index k.&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;invalid index&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_A</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>                              <span class="c1"># retrieve from array</span>
    
    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Add object to end of the array.&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capacity</span><span class="p">:</span>                  <span class="c1"># not enough room</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_resize</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capacity</span><span class="p">)</span>           <span class="c1"># so double capacity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_A</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_n</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">+=</span> <span class="mi">1</span>
        
    <span class="k">def</span> <span class="nf">_resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>                              <span class="c1"># nonpublic utitity</span>
        <span class="sd">&#39;&#39;&#39;Resize internal array to capacity c.&#39;&#39;&#39;</span>
        <span class="n">B</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_array</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>                        <span class="c1"># new (bigger) array</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n</span><span class="p">):</span>                       <span class="c1"># for each existing value</span>
            <span class="n">B</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_A</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_A</span> <span class="o">=</span> <span class="n">B</span>                                    <span class="c1"># use the bigger array</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_capacity</span> <span class="o">=</span> <span class="n">c</span>
        
    <span class="k">def</span> <span class="nf">_make_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>                          <span class="c1"># nonpublic utitity</span>
        <span class="sd">&#39;&#39;&#39;Return new array with capacity c.&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">py_object</span><span class="p">)()</span>                <span class="c1"># see ctypes documentation</span>
    
    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Insert value at index k, shifting subsequent values rightward.&#39;&#39;&#39;</span>
        <span class="c1"># (for simplicity, we assume 0 &lt;= k &lt;= n in this verion)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capacity</span><span class="p">:</span>                  <span class="c1"># not enough room</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_resize</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capacity</span><span class="p">)</span>           <span class="c1"># so double capacity</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>                <span class="c1"># shift rightmost first</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_A</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_A</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>                             <span class="c1"># store newest element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">+=</span> <span class="mi">1</span>
        
    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Remove first occurrence of value (or raise ValueError).&#39;&#39;&#39;</span>
        <span class="c1"># (for simplicity, we do not consider shrinking the dynamic array in this version)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="summary">
<h2><span class="section-number">9.5. </span>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">#</a></h2>
<p><strong>Static vs. Dynamic Arrays</strong>: Static arrays have fixed size, while dynamic arrays can grow in size. In Python, <code class="docutils literal notranslate"><span class="pre">tuple</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code> are examples of static arrays, while <code class="docutils literal notranslate"><span class="pre">list</span></code> is an example of a dynamic array.</p>
<p><strong>Compact vs. Referential Arrays</strong>: Compact arrays store the data directly, while referential arrays store references to the data. In Python, <code class="docutils literal notranslate"><span class="pre">str</span></code> and <code class="docutils literal notranslate"><span class="pre">array</span></code> are examples of compact arrays, while <code class="docutils literal notranslate"><span class="pre">list</span></code> and <code class="docutils literal notranslate"><span class="pre">tuple</span></code> are examples of referential arrays.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>-</p></th>
<th class="head"><p>Static (Fixed Size)</p></th>
<th class="head"><p>Dynamic (Variable Size)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Compact (Store Data directly)</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">str</span></code>,<code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Referential (Store References)</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">tuple</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">list</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./data"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="linkedlists_circular.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">8.3. </span>Circular Linked Lists</p>
      </div>
    </a>
    <a class="right-next"
       href="../functions/filesmodules.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">10. </span>Files and Modules</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#static-arrays">9.1. Static Arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#referential-arrays">9.2. Referential Arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compact-arrays">9.3. Compact Arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamic-arrays">9.4. Dynamic Arrays</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">9.4.1. Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">9.5. Summary</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Syed Fahad Sultan
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>